---
import Layout from '../../layouts/Layout.astro';
import { getPostBySlug } from '../../lib/api';
import { getImageUrl, getFallbackImageUrl } from '../../utils/image';

// Remove getStaticPaths
const { slug } = Astro.params;
const post = await getPostBySlug(slug);

if (!post) {
  return Astro.redirect('/404');
}

const imageUrl = post.image ? getImageUrl(post.image) : getFallbackImageUrl();
---

<!-- Rest of the template remains the same -->
---
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';
import { getPosts } from '../utils/api';

let posts = [];
try {
  posts = await getPosts();
} catch (error) {
  console.error('Error fetching posts:', error);
}
---

<Layout title="News Magazine">
  <main class="max-w-6xl mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold text-center mb-12">Latest News</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {Array.isArray(posts) && posts.length > 0 ? (
        posts.map(post => <PostCard post={post} />)
      ) : (
        <p class="text-center col-span-full text-gray-600">No posts available at the moment.</p>
      )}
    </div>
  </main>
</Layout>